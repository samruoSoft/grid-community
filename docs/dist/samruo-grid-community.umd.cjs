(function(E,G){typeof exports=="object"&&typeof module<"u"?module.exports=G():typeof define=="function"&&define.amd?define(G):(E=typeof globalThis<"u"?globalThis:E||self,E.Samruo=G())})(this,function(){"use strict";var Ot=Object.defineProperty;var Gt=(E,G,U)=>G in E?Ot(E,G,{enumerable:!0,configurable:!0,writable:!0,value:U}):E[G]=U;var Ce=(E,G,U)=>Gt(E,typeof G!="symbol"?G+"":G,U);function E(){}function G(t){return t()}function U(){return Object.create(null)}function X(t){t.forEach(G)}function Ne(t){return typeof t=="function"}function ue(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function $e(t){return Object.keys(t).length===0}function K(t){return t??""}function k(t,e){t.appendChild(e)}function y(t,e,l){t.insertBefore(e,l||null)}function C(t){t.parentNode&&t.parentNode.removeChild(t)}function we(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function R(t){return document.createElement(t)}function S(t){return document.createTextNode(t)}function V(){return S(" ")}function fe(){return S("")}function J(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function b(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function xe(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function H(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function et(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let ne;function ie(t){ne=t}function be(){if(!ne)throw new Error("Function called outside component initialization");return ne}function ye(t){be().$$.on_mount.push(t)}function Se(t){be().$$.on_destroy.push(t)}function ve(){const t=be();return(e,l,{cancelable:n=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=et(e,l,{cancelable:n});return o.slice().forEach(s=>{s.call(t,r)}),!r.defaultPrevented}return!0}}const Z=[],de=[];let $=[];const Ee=[],Te=Promise.resolve();let ke=!1;function ze(){ke||(ke=!0,Te.then(Ie))}function He(){return ze(),Te}function je(t){$.push(t)}const Re=new Set;let x=0;function Ie(){if(x!==0)return;const t=ne;do{try{for(;x<Z.length;){const e=Z[x];x++,ie(e),tt(e.$$)}}catch(e){throw Z.length=0,x=0,e}for(ie(null),Z.length=0,x=0;de.length;)de.pop()();for(let e=0;e<$.length;e+=1){const l=$[e];Re.has(l)||(Re.add(l),l())}$.length=0}while(Z.length);for(;Ee.length;)Ee.pop()();ke=!1,Re.clear(),ie(t)}function tt(t){if(t.fragment!==null){t.update(),X(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(je)}}function lt(t){const e=[],l=[];$.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),$=e}const ce=new Set;let Q;function ee(){Q={r:0,c:[],p:Q}}function te(){Q.r||X(Q.c),Q=Q.p}function z(t,e){t&&t.i&&(ce.delete(t),t.i(e))}function D(t,e,l,n){if(t&&t.o){if(ce.has(t))return;ce.add(t),Q.c.push(()=>{ce.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function q(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function nt(t,e){D(t,1,1,()=>{e.delete(t.key)})}function it(t,e,l,n,o,r,s,a,u,d,g,_){let w=t.length,c=r.length,j=w;const p={};for(;j--;)p[t[j].key]=j;const h=[],i=new Map,f=new Map,N=[];for(j=c;j--;){const I=_(o,r,j),P=l(I);let A=s.get(P);A?N.push(()=>A.p(I,e)):(A=d(P,I),A.c()),i.set(P,h[j]=A),P in p&&f.set(P,Math.abs(j-p[P]))}const F=new Set,le=new Set;function se(I){z(I,1),I.m(a,g),s.set(I.key,I),g=I.first,c--}for(;w&&c;){const I=h[c-1],P=t[w-1],A=I.key,W=P.key;I===P?(g=I.first,w--,c--):i.has(W)?!s.has(A)||F.has(A)?se(I):le.has(W)?w--:f.get(A)>f.get(W)?(le.add(A),se(I)):(F.add(W),w--):(u(P,s),w--)}for(;w--;){const I=t[w];i.has(I.key)||u(I,s)}for(;c;)se(h[c-1]);return X(N),h}function he(t){t&&t.c()}function oe(t,e,l){const{fragment:n,after_update:o}=t.$$;n&&n.m(e,l),je(()=>{const r=t.$$.on_mount.map(G).filter(Ne);t.$$.on_destroy?t.$$.on_destroy.push(...r):X(r),t.$$.on_mount=[]}),o.forEach(je)}function re(t,e){const l=t.$$;l.fragment!==null&&(lt(l.after_update),X(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function ot(t,e){t.$$.dirty[0]===-1&&(Z.push(t),ze(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function _e(t,e,l,n,o,r,s=null,a=[-1]){const u=ne;ie(t);const d=t.$$={fragment:null,ctx:[],props:r,update:E,not_equal:o,bound:U(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:U(),dirty:a,skip_bound:!1,root:e.target||u.$$.root};s&&s(d.root);let g=!1;if(d.ctx=l?l(t,e.props||{},(_,w,...c)=>{const j=c.length?c[0]:w;return d.ctx&&o(d.ctx[_],d.ctx[_]=j)&&(!d.skip_bound&&d.bound[_]&&d.bound[_](j),g&&ot(t,_)),w}):[],d.update(),g=!0,X(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const _=xe(e.target);d.fragment&&d.fragment.l(_),_.forEach(C)}else d.fragment&&d.fragment.c();e.intro&&z(t.$$.fragment),oe(t,e.target,e.anchor),Ie()}ie(u)}class ge{constructor(){Ce(this,"$$");Ce(this,"$$set")}$destroy(){re(this,1),this.$destroy=E}$on(e,l){if(!Ne(l))return E;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const o=n.indexOf(l);o!==-1&&n.splice(o,1)}}$set(e){this.$$set&&!$e(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const rt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(rt);function Le(t){let e;function l(r,s){return r[0].onclick?at:st}let n=l(t),o=n(t);return{c(){o.c(),e=fe()},m(r,s){o.m(r,s),y(r,e,s)},p(r,s){n===(n=l(r))&&o?o.p(r,s):(o.d(1),o=n(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&C(e),o.d(r)}}}function st(t){let e,l=t[0].textContent+"",n,o;return{c(){e=R("a"),n=S(l),b(e,"href","javascript:void(0)"),b(e,"class",o=K(t[0].className)+" svelte-rhrpja")},m(r,s){y(r,e,s),k(e,n)},p(r,s){s&1&&l!==(l=r[0].textContent+"")&&M(n,l),s&1&&o!==(o=K(r[0].className)+" svelte-rhrpja")&&b(e,"class",o)},d(r){r&&C(e)}}}function at(t){let e,l=t[0].textContent+"",n,o,r,s;return{c(){e=R("a"),n=S(l),b(e,"href","javascript:void(0)"),b(e,"class",o=K(t[0].className)+" svelte-rhrpja")},m(a,u){y(a,e,u),k(e,n),r||(s=J(e,"click",t[2]),r=!0)},p(a,u){u&1&&l!==(l=a[0].textContent+"")&&M(n,l),u&1&&o!==(o=K(a[0].className)+" svelte-rhrpja")&&b(e,"class",o)},d(a){a&&C(e),r=!1,s()}}}function De(t){let e;function l(r,s){return r[0].onclick?ft:ut}let n=l(t),o=n(t);return{c(){o.c(),e=fe()},m(r,s){o.m(r,s),y(r,e,s)},p(r,s){n===(n=l(r))&&o?o.p(r,s):(o.d(1),o=n(r),o&&(o.c(),o.m(e.parentNode,e)))},d(r){r&&C(e),o.d(r)}}}function ut(t){let e,l=t[0].textContent+"",n,o;return{c(){e=R("button"),n=S(l),b(e,"class",o=K(t[0].className)+" svelte-rhrpja")},m(r,s){y(r,e,s),k(e,n)},p(r,s){s&1&&l!==(l=r[0].textContent+"")&&M(n,l),s&1&&o!==(o=K(r[0].className)+" svelte-rhrpja")&&b(e,"class",o)},d(r){r&&C(e)}}}function ft(t){let e,l=t[0].textContent+"",n,o,r,s;return{c(){e=R("button"),n=S(l),b(e,"class",o=K(t[0].className)+" svelte-rhrpja")},m(a,u){y(a,e,u),k(e,n),r||(s=J(e,"click",t[3]),r=!0)},p(a,u){u&1&&l!==(l=a[0].textContent+"")&&M(n,l),u&1&&o!==(o=K(a[0].className)+" svelte-rhrpja")&&b(e,"class",o)},d(a){a&&C(e),r=!1,s()}}}function dt(t){let e,l,n=t[0].type==="link"&&Le(t),o=t[0].type==="button"&&De(t);return{c(){n&&n.c(),e=V(),o&&o.c(),l=fe()},m(r,s){n&&n.m(r,s),y(r,e,s),o&&o.m(r,s),y(r,l,s)},p(r,[s]){r[0].type==="link"?n?n.p(r,s):(n=Le(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),r[0].type==="button"?o?o.p(r,s):(o=De(r),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null)},i:E,o:E,d(r){r&&(C(e),C(l)),n&&n.d(r),o&&o.d(r)}}}function ct(t,e,l){let{cell:n}=e,{data:o}=e;const r=()=>n.onclick(o),s=()=>n.onclick(o);return t.$$set=a=>{"cell"in a&&l(0,n=a.cell),"data"in a&&l(1,o=a.data)},[n,o,r,s]}class ht extends ge{constructor(e){super(),_e(this,e,ct,dt,ue,{cell:0,data:1})}}function _t(t){let e,l=t[1].headerName+"",n,o;return{c(){e=R("div"),n=S(l),b(e,"class",o="column-text "+(t[1].sortable?"sortable":"")+" "+t[0]+" svelte-rhrpja"),H(e,"width",t[1].width-1+"px"),H(e,"height",t[2]+"px")},m(r,s){y(r,e,s),k(e,n)},p(r,s){s&2&&l!==(l=r[1].headerName+"")&&M(n,l),s&3&&o!==(o="column-text "+(r[1].sortable?"sortable":"")+" "+r[0]+" svelte-rhrpja")&&b(e,"class",o),s&2&&H(e,"width",r[1].width-1+"px"),s&4&&H(e,"height",r[2]+"px")},d(r){r&&C(e)}}}function gt(t){let e,l=t[1].headerName+"",n,o,r,s;return{c(){e=R("div"),n=S(l),b(e,"class",o="column-text "+(t[1].sortable?"sortable":"")+" "+t[0]+" svelte-rhrpja"),H(e,"width",t[1].width-1+"px"),H(e,"height",t[2]+"px")},m(a,u){y(a,e,u),k(e,n),r||(s=J(e,"click",t[6]),r=!0)},p(a,u){u&2&&l!==(l=a[1].headerName+"")&&M(n,l),u&3&&o!==(o="column-text "+(a[1].sortable?"sortable":"")+" "+a[0]+" svelte-rhrpja")&&b(e,"class",o),u&2&&H(e,"width",a[1].width-1+"px"),u&4&&H(e,"height",a[2]+"px")},d(a){a&&C(e),r=!1,s()}}}function mt(t){let e,l,n,o;function r(u,d){return u[1].sortable?gt:_t}let s=r(t),a=s(t);return{c(){a.c(),e=V(),l=R("div"),b(l,"class","column-resize svelte-rhrpja"),H(l,"position","relative"),H(l,"height",t[2]+"px")},m(u,d){a.m(u,d),y(u,e,d),y(u,l,d),n||(o=J(l,"mousedown",t[7]),n=!0)},p(u,[d]){s===(s=r(u))&&a?a.p(u,d):(a.d(1),a=s(u),a&&(a.c(),a.m(e.parentNode,e))),d&4&&H(l,"height",u[2]+"px")},i:E,o:E,d(u){u&&(C(e),C(l)),a.d(u),n=!1,o()}}}function pt(t,e,l){const n=ve();let{order:o}=e,{column:r}=e,{height:s}=e,{columnSort:a={field:"",order:"asc"}}=e;ye(()=>()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",j)});let u=!1,d,g;function _(i,f){l(5,a.field=f,a),a.field===f&&l(5,a.order=a.order==="asc"?"desc":"asc",a),n("onHeaderClick",f)}function w(i,f){d=f,g=i.target.parentNode.getBoundingClientRect().left,u=!0,document.addEventListener("mousemove",c),document.addEventListener("mouseup",j)}function c(i){if(u){const f=i.clientX-g-10;n("onHandleResize",{field:d,width:f})}}function j(){u=!1,document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",j)}const p=i=>_(i,r.field),h=i=>{w(i,r.field)};return t.$$set=i=>{"order"in i&&l(0,o=i.order),"column"in i&&l(1,r=i.column),"height"in i&&l(2,s=i.height),"columnSort"in i&&l(5,a=i.columnSort)},[o,r,s,_,w,a,p,h]}class Ae extends ge{constructor(e){super(),_e(this,e,pt,mt,ue,{order:0,column:1,height:2,columnSort:5})}}function Be(t,e,l){const n=t.slice();return n[14]=e[l],n}function Me(t,e,l){const n=t.slice();return n[14]=e[l],n}function Oe(t){let e,l,n,o,r;return{c(){e=R("th"),l=R("div"),n=R("div"),o=S(t[4]),b(n,"class","column-text svelte-rhrpja"),H(n,"width",t[5]+12+"px"),H(n,"height",t[6]+"px "),b(l,"class","column svelte-rhrpja"),b(e,"rowspan",r=t[3]?2:0),b(e,"class","svelte-rhrpja")},m(s,a){y(s,e,a),k(e,l),k(l,n),k(n,o)},p(s,a){a&16&&M(o,s[4]),a&32&&H(n,"width",s[5]+12+"px"),a&64&&H(n,"height",s[6]+"px "),a&8&&r!==(r=s[3]?2:0)&&b(e,"rowspan",r)},d(s){s&&C(e)}}}function wt(t){let e,l=t[14].headerName+"",n,o,r;return{c(){e=R("th"),n=S(l),o=V(),b(e,"colspan",r=t[14].span),H(e,"height",t[6]+"px"),b(e,"class","svelte-rhrpja")},m(s,a){y(s,e,a),k(e,n),k(e,o)},p(s,a){a&1&&l!==(l=s[14].headerName+"")&&M(n,l),a&1&&r!==(r=s[14].span)&&b(e,"colspan",r),a&64&&H(e,"height",s[6]+"px")},i:E,o:E,d(s){s&&C(e)}}}function bt(t){let e,l,n,o,r,s;return n=new Ae({props:{order:t[7]&&t[14].field===t[7].field?t[7].order:"",column:t[14],height:t[6]*2,columnSort:t[7]}}),n.$on("onHeaderClick",t[10]),n.$on("onHandleResize",t[11]),{c(){e=R("th"),l=R("div"),he(n.$$.fragment),o=V(),b(l,"class","column svelte-rhrpja"),b(e,"rowspan",r=t[14].span),H(e,"width",t[14].width+"px"),H(e,"height",t[6]*2+"px"),b(e,"class","svelte-rhrpja")},m(a,u){y(a,e,u),k(e,l),oe(n,l,null),k(e,o),s=!0},p(a,u){const d={};u&129&&(d.order=a[7]&&a[14].field===a[7].field?a[7].order:""),u&1&&(d.column=a[14]),u&64&&(d.height=a[6]*2),u&128&&(d.columnSort=a[7]),n.$set(d),(!s||u&1&&r!==(r=a[14].span))&&b(e,"rowspan",r),(!s||u&1)&&H(e,"width",a[14].width+"px"),(!s||u&64)&&H(e,"height",a[6]*2+"px")},i(a){s||(z(n.$$.fragment,a),s=!0)},o(a){D(n.$$.fragment,a),s=!1},d(a){a&&C(e),re(n)}}}function Ge(t){let e,l,n,o;const r=[bt,wt],s=[];function a(u,d){return u[14].type===0?0:1}return e=a(t),l=s[e]=r[e](t),{c(){l.c(),n=fe()},m(u,d){s[e].m(u,d),y(u,n,d),o=!0},p(u,d){let g=e;e=a(u),e===g?s[e].p(u,d):(ee(),D(s[g],1,1,()=>{s[g]=null}),te(),l=s[e],l?l.p(u,d):(l=s[e]=r[e](u),l.c()),z(l,1),l.m(n.parentNode,n))},i(u){o||(z(l),o=!0)},o(u){D(l),o=!1},d(u){u&&C(n),s[e].d(u)}}}function Pe(t){let e,l,n,o,r;return n=new Ae({props:{order:t[7]&&t[14].field===t[7].field?t[7].order:"",column:t[14],height:t[6],columnSort:t[7]}}),n.$on("onHeaderClick",t[12]),n.$on("onHandleResize",t[13]),{c(){e=R("th"),l=R("div"),he(n.$$.fragment),o=V(),b(l,"class","column svelte-rhrpja"),b(e,"class","svelte-rhrpja")},m(s,a){y(s,e,a),k(e,l),oe(n,l,null),k(e,o),r=!0},p(s,a){const u={};a&130&&(u.order=s[7]&&s[14].field===s[7].field?s[7].order:""),a&2&&(u.column=s[14]),a&64&&(u.height=s[6]),a&128&&(u.columnSort=s[7]),n.$set(u)},i(s){r||(z(n.$$.fragment,s),r=!0)},o(s){D(n.$$.fragment,s),r=!1},d(s){s&&C(e),re(n)}}}function vt(t){let e,l,n,o,r,s,a,u=t[2]&&Oe(t),d=q(t[0]),g=[];for(let p=0;p<d.length;p+=1)g[p]=Ge(Me(t,d,p));const _=p=>D(g[p],1,1,()=>{g[p]=null});let w=q(t[1]),c=[];for(let p=0;p<w.length;p+=1)c[p]=Pe(Be(t,w,p));const j=p=>D(c[p],1,1,()=>{c[p]=null});return{c(){e=R("table"),l=R("thead"),n=R("tr"),u&&u.c(),o=V();for(let p=0;p<g.length;p+=1)g[p].c();r=V(),s=R("tr");for(let p=0;p<c.length;p+=1)c[p].c();b(e,"class","virtual-header svelte-rhrpja")},m(p,h){y(p,e,h),k(e,l),k(l,n),u&&u.m(n,null),k(n,o);for(let i=0;i<g.length;i+=1)g[i]&&g[i].m(n,null);k(l,r),k(l,s);for(let i=0;i<c.length;i+=1)c[i]&&c[i].m(s,null);a=!0},p(p,[h]){if(p[2]?u?u.p(p,h):(u=Oe(p),u.c(),u.m(n,o)):u&&(u.d(1),u=null),h&961){d=q(p[0]);let i;for(i=0;i<d.length;i+=1){const f=Me(p,d,i);g[i]?(g[i].p(f,h),z(g[i],1)):(g[i]=Ge(f),g[i].c(),z(g[i],1),g[i].m(n,null))}for(ee(),i=d.length;i<g.length;i+=1)_(i);te()}if(h&962){w=q(p[1]);let i;for(i=0;i<w.length;i+=1){const f=Be(p,w,i);c[i]?(c[i].p(f,h),z(c[i],1)):(c[i]=Pe(f),c[i].c(),z(c[i],1),c[i].m(s,null))}for(ee(),i=w.length;i<c.length;i+=1)j(i);te()}},i(p){if(!a){for(let h=0;h<d.length;h+=1)z(g[h]);for(let h=0;h<w.length;h+=1)z(c[h]);a=!0}},o(p){g=g.filter(Boolean);for(let h=0;h<g.length;h+=1)D(g[h]);c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)D(c[h]);a=!1},d(p){p&&C(e),u&&u.d(),we(g,p),we(c,p)}}}function kt(t,e,l){const n=ve();let{autoIndex:o=!1}=e,{doubleHeader:r=!1}=e,{indexTitle:s="№"}=e,{index_width:a=40}=e,{header_height:u=30}=e,{doubleHeader_columns:d=[]}=e,{childrenHeader_columns:g=[]}=e,{columnSort:_={field:"",order:"asc"}}=e;function w(i){n("onHandleResize",i),g.find(f=>f.field===i.field)&&(g.find(f=>f.field===i.field).width=i.width,l(1,g=[...g])),d.find(f=>f.field===i.field)&&(d.find(f=>f.field===i.field).width=i.width,l(0,d=[...d]))}Se(()=>{l(0,d=[]),l(1,g=[])});const c=i=>n("onHeaderClick",i.detail),j=i=>w(i.detail),p=i=>n("onHeaderClick",i.detail),h=i=>w(i.detail);return t.$$set=i=>{"autoIndex"in i&&l(2,o=i.autoIndex),"doubleHeader"in i&&l(3,r=i.doubleHeader),"indexTitle"in i&&l(4,s=i.indexTitle),"index_width"in i&&l(5,a=i.index_width),"header_height"in i&&l(6,u=i.header_height),"doubleHeader_columns"in i&&l(0,d=i.doubleHeader_columns),"childrenHeader_columns"in i&&l(1,g=i.childrenHeader_columns),"columnSort"in i&&l(7,_=i.columnSort)},[d,g,o,r,s,a,u,_,n,w,c,j,p,h]}class Ht extends ge{constructor(e){super(),_e(this,e,kt,vt,ue,{autoIndex:2,doubleHeader:3,indexTitle:4,index_width:5,header_height:6,doubleHeader_columns:0,childrenHeader_columns:1,columnSort:7})}}function Ve(t,e,l){const n=t.slice();return n[38]=e[l],n}function We(t,e,l){const n=t.slice();return n[41]=e[l],n[43]=l,n}function Fe(t){let e,l,n=(t[38].data.___index?t[38].data.___index:"")+"",o;return{c(){e=R("div"),l=R("span"),o=S(n),b(l,"class","svelte-rhrpja"),H(e,"width",Xe+"px"),H(e,"height",t[0].rowHeight+"px"),H(e,"text-align","center"),b(e,"class","svelte-rhrpja")},m(r,s){y(r,e,s),k(e,l),k(l,o)},p(r,s){s[0]&8192&&n!==(n=(r[38].data.___index?r[38].data.___index:"")+"")&&M(o,n),s[0]&1&&H(e,"height",r[0].rowHeight+"px")},d(r){r&&C(e)}}}function jt(t){let e=t[38].data[t[41].field]+"",l;return{c(){l=S(e)},m(n,o){y(n,l,o)},p(n,o){o[0]&8704&&e!==(e=n[38].data[n[41].field]+"")&&M(l,e)},i:E,o:E,d(n){n&&C(l)}}}function Rt(t){let e,l;return e=new ht({props:{data:t[38].data,cell:t[41].cellRenderer({data:t[38].data})}}),{c(){he(e.$$.fragment)},m(n,o){oe(e,n,o),l=!0},p(n,o){const r={};o[0]&8192&&(r.data=n[38].data),o[0]&8704&&(r.cell=n[41].cellRenderer({data:n[38].data})),e.$set(r)},i(n){l||(z(e.$$.fragment,n),l=!0)},o(n){D(e.$$.fragment,n),l=!1},d(n){re(e,n)}}}function Ke(t){let e,l,n,o,r,s,a;const u=[Rt,jt],d=[];function g(_,w){return _[41].cellRenderer?0:1}return n=g(t),o=d[n]=u[n](t),{c(){e=R("div"),l=R("span"),o.c(),r=V(),b(l,"class","svelte-rhrpja"),b(e,"style",s=(t[41].align?"text-align:"+t[41].align+";":"")+" width:"+(t[43]===t[0].columns.length-1?t[41].width+2:t[41].width)+"px;height: "+t[0].rowHeight+"px"),b(e,"class","svelte-rhrpja")},m(_,w){y(_,e,w),k(e,l),d[n].m(l,null),k(e,r),a=!0},p(_,w){let c=n;n=g(_),n===c?d[n].p(_,w):(ee(),D(d[c],1,1,()=>{d[c]=null}),te(),o=d[n],o?o.p(_,w):(o=d[n]=u[n](_),o.c()),z(o,1),o.m(l,null)),(!a||w[0]&513&&s!==(s=(_[41].align?"text-align:"+_[41].align+";":"")+" width:"+(_[43]===_[0].columns.length-1?_[41].width+2:_[41].width)+"px;height: "+_[0].rowHeight+"px"))&&b(e,"style",s)},i(_){a||(z(o),a=!0)},o(_){D(o),a=!1},d(_){_&&C(e),d[n].d()}}}function qe(t,e){let l,n,o,r,s,a,u,d,g,_=e[0].autoIndex&&Fe(e),w=q(e[9]),c=[];for(let h=0;h<w.length;h+=1)c[h]=Ke(We(e,w,h));const j=h=>D(c[h],1,1,()=>{c[h]=null});function p(){return e[29](e[38])}return{key:t,first:null,c(){l=R("div"),n=R("div"),_&&_.c(),o=V();for(let h=0;h<c.length;h+=1)c[h].c();a=V(),b(n,"class",r="virtual-list-row "+(e[38].data.___index%2===0?"":"row-odd")+" "+(e[0].multi_select&&e[17].includes(e[38].data.___index)?"row-selected":"")+" svelte-rhrpja"),b(n,"data-index",s=e[38].data.___index),b(n,"role","row"),b(n,"tabindex","0"),b(l,"class","row-container svelte-rhrpja"),this.first=l},m(h,i){y(h,l,i),k(l,n),_&&_.m(n,null),k(n,o);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(n,null);k(l,a),u=!0,d||(g=[J(n,"click",p),J(n,"keypress",Nt)],d=!0)},p(h,i){if(e=h,e[0].autoIndex?_?_.p(e,i):(_=Fe(e),_.c(),_.m(n,o)):_&&(_.d(1),_=null),i[0]&8705){w=q(e[9]);let f;for(f=0;f<w.length;f+=1){const N=We(e,w,f);c[f]?(c[f].p(N,i),z(c[f],1)):(c[f]=Ke(N),c[f].c(),z(c[f],1),c[f].m(n,null))}for(ee(),f=w.length;f<c.length;f+=1)j(f);te()}(!u||i[0]&8193&&r!==(r="virtual-list-row "+(e[38].data.___index%2===0?"":"row-odd")+" "+(e[0].multi_select&&e[17].includes(e[38].data.___index)?"row-selected":"")+" svelte-rhrpja"))&&b(n,"class",r),(!u||i[0]&8192&&s!==(s=e[38].data.___index))&&b(n,"data-index",s)},i(h){if(!u){for(let i=0;i<w.length;i+=1)z(c[i]);u=!0}},o(h){c=c.filter(Boolean);for(let i=0;i<c.length;i+=1)D(c[i]);u=!1},d(h){h&&C(l),_&&_.d(),we(c,h),d=!1,X(g)}}}function Ue(t){let e,l,n=(t[0].language&&t[0].language.allRows?t[0].language.allRows:"All Rows")+"",o,r,s=(t[12]?t[12].length:0)+"",a,u,d=(t[0].language&&t[0].language.visibleRows?t[0].language.visibleRows:"Visible Rows")+"",g,_,w=(t[12]&&t[12].length>0?t[2]+1:0)+"",c,j,p,h;return{c(){e=R("div"),l=R("div"),o=S(n),r=S(`
                    : `),a=S(s),u=S(`,
                    `),g=S(d),_=S(`
                    : `),c=S(w),j=S("~"),p=S(t[3]),h=S("."),b(l,"class","svelte-rhrpja"),b(e,"class","virtual-footer svelte-rhrpja")},m(i,f){y(i,e,f),k(e,l),k(l,o),k(l,r),k(l,a),k(l,u),k(l,g),k(l,_),k(l,c),k(l,j),k(l,p),k(l,h)},p(i,f){f[0]&1&&n!==(n=(i[0].language&&i[0].language.allRows?i[0].language.allRows:"All Rows")+"")&&M(o,n),f[0]&4096&&s!==(s=(i[12]?i[12].length:0)+"")&&M(a,s),f[0]&1&&d!==(d=(i[0].language&&i[0].language.visibleRows?i[0].language.visibleRows:"Visible Rows")+"")&&M(g,d),f[0]&4100&&w!==(w=(i[12]&&i[12].length>0?i[2]+1:0)+"")&&M(c,w),f[0]&8&&M(p,i[3])},d(i){i&&C(e)}}}function Ct(t){let e,l,n,o,r,s,a=[],u=new Map,d,g,_,w,c;o=new Ht({props:{autoIndex:t[0].autoIndex,doubleHeader:t[4],indexTitle:t[1],index_width:Xe,header_height:t[5],doubleHeader_columns:t[8],childrenHeader_columns:t[15],columnSort:t[0].sort}}),o.$on("onHeaderClick",t[27]),o.$on("onHandleResize",t[28]);let j=q(t[13]);const p=i=>i[38].index;for(let i=0;i<j.length;i+=1){let f=Ve(t,j,i),N=p(f);u.set(N,a[i]=qe(N,f))}let h=t[0].showRowsCounter&&Ue(t);return{c(){e=R("div"),l=R("div"),n=R("div"),he(o.$$.fragment),r=V(),s=R("div");for(let i=0;i<a.length;i+=1)a[i].c();d=V(),h&&h.c(),b(s,"class","virtual-list-contents svelte-rhrpja"),H(s,"padding-top",t[10]+"px"),H(s,"padding-bottom",t[11]+"px"),b(n,"class","virtual-list-viewport svelte-rhrpja"),H(n,"height",t[14]+"px"),b(l,"class","virtual-grid svelte-rhrpja"),H(l,"width","100%"),H(l,"height",t[0].height+"px"),b(e,"class",g="virtual-list-container "+t[0].className+" svelte-rhrpja"),H(e,"width",t[0].width+"px")},m(i,f){y(i,e,f),k(e,l),k(l,n),oe(o,n,null),k(n,r),k(n,s);for(let N=0;N<a.length;N+=1)a[N]&&a[N].m(s,null);t[30](s),t[31](n),k(l,d),h&&h.m(l,null),_=!0,w||(c=J(n,"scroll",t[16]),w=!0)},p(i,f){const N={};f[0]&1&&(N.autoIndex=i[0].autoIndex),f[0]&16&&(N.doubleHeader=i[4]),f[0]&2&&(N.indexTitle=i[1]),f[0]&32&&(N.header_height=i[5]),f[0]&256&&(N.doubleHeader_columns=i[8]),f[0]&1&&(N.columnSort=i[0].sort),o.$set(N),f[0]&401921&&(j=q(i[13]),ee(),a=it(a,f,p,1,i,j,u,s,nt,qe,null,Ve),te()),(!_||f[0]&1024)&&H(s,"padding-top",i[10]+"px"),(!_||f[0]&2048)&&H(s,"padding-bottom",i[11]+"px"),(!_||f[0]&16384)&&H(n,"height",i[14]+"px"),i[0].showRowsCounter?h?h.p(i,f):(h=Ue(i),h.c(),h.m(l,null)):h&&(h.d(1),h=null),(!_||f[0]&1)&&H(l,"height",i[0].height+"px"),(!_||f[0]&1&&g!==(g="virtual-list-container "+i[0].className+" svelte-rhrpja"))&&b(e,"class",g),(!_||f[0]&1)&&H(e,"width",i[0].width+"px")},i(i){if(!_){z(o.$$.fragment,i);for(let f=0;f<j.length;f+=1)z(a[f]);_=!0}},o(i){D(o.$$.fragment,i);for(let f=0;f<a.length;f+=1)D(a[f]);_=!1},d(i){i&&C(e),re(o);for(let f=0;f<a.length;f+=1)a[f].d();t[30](null),t[31](null),h&&h.d(),w=!1,c()}}}let Xe=40;function Je(t){return t.map((e,l)=>({...e,___index:l+1}))}function Nt(){}function yt(t,e,l){let n,o,r,s;const a=ve();let u=0,d=0,g=[],_,w,c,j=!1,p=[],h=[],i=[],f=0,N=0,F=0,le;async function se(m,B,T){const{scrollTop:O}=w;await He();let me=f-O,L=u;for(;me+T<=B&&L<m.length;){let ae=_[L-u];ae||(l(3,d=L+1),await He(),ae=_[L-u]);const Y=g[L]=T||ae.offsetHeight;me+=Y,L+=1}l(3,d=L);const pe=m.length-d;F=v.rowHeight,l(11,N=pe*F),g.length=m.length}async function I(){const{scrollTop:m}=w,B=u;for(let L=0;L<_.length;L+=1)g[u+L]=v.rowHeight||_[L].offsetHeight;let T=0,O=0;for(;T<v.data.length;){const L=g[T]||F;if(O+L>m){l(2,u=T),l(10,f=O+v.rowHeight/3);break}O+=L,T+=1}for(;T<v.data.length&&(O+=g[T]||F,T+=1,!(O>m+r-50)););l(3,d=T);const me=v.data.length-d;for(F=v.rowHeight;T<v.data.length;)g[T++]=F;if(l(11,N=me*F),u<B){await He();let L=0,pe=0;for(let Y=u;Y<B;Y+=1)_[Y-u]&&(L+=g[Y],pe+=v.rowHeight||_[Y-u].offsetHeight);const ae=pe-L;w.scrollTo(0,m+ae)}}let{indexTitle:P="№"}=e,A=[],W=[],{options:v={data:[],columns:[],sort:{field:"",order:"asc"}}}=e;function Et(m){l(12,A=Je(m))}function Tt(){return A.filter(m=>W.includes(m.___index))}function Qe(m){console.log("onRowClick",m);let B=document.querySelector(`.___index_${m.___index}`);W.includes(m.___index)?(W.splice(W.indexOf(m.___index),1),B&&B.classList.remove("row-selected")):(W.push(m.___index),B&&B.classList.toggle("row-selected")),a("onRowClick",m)}function Ye(m){i.find(B=>B.field===m.field).width=m.width,l(9,i=[...i])}function Ze(m){const B=typeof v.data[0][m];console.log("onHeaderClick",m),v.sort.order==="asc"?B==="number"?l(0,v.data=v.data.sort((T,O)=>T[m]-O[m]),v):l(0,v.data=v.data.sort((T,O)=>O[m].localeCompare(T[m])),v):B==="number"?l(0,v.data=v.data.sort((T,O)=>O[m]-T[m]),v):l(0,v.data=v.data.sort((T,O)=>T[m].localeCompare(O[m])),v),l(0,v.data=[...v.data],v)}ye(()=>{l(12,A=Je(v.data)),l(0,v.data=A,v),_=c.getElementsByClassName("virtual-list-row"),l(25,le=!0),v.columns.forEach(m=>{m.children&&m.children.length>0?(l(4,j=!0),p.push({headerName:m.headerName,span:m.children.length,type:1}),h.push(...m.children),i.push(...m.children)):(m.span=2,m.type=0,p.push(m),i.push(m))}),(!j||h.length===0)&&(h.push(...v.columns),l(8,p=[])),v.sort||l(0,v.sort={field:"",order:"asc"},v)}),Se(()=>{l(0,v={})});function zt(m){l(0,v.width=m,v)}function It(m){l(0,v.height=m,v)}const Lt=m=>Ze(m.detail),Dt=m=>Ye(m.detail),At=m=>Qe(m);function Bt(m){de[m?"unshift":"push"](()=>{c=m,l(7,c)})}function Mt(m){de[m?"unshift":"push"](()=>{w=m,l(6,w)})}return t.$$set=m=>{"indexTitle"in m&&l(1,P=m.indexTitle),"options"in m&&l(0,v=m.options)},t.$$.update=()=>{t.$$.dirty[0]&16&&l(5,n=j?20:40),t.$$.dirty[0]&1&&l(26,r=v.showRowsCounter?v.height-75:v.height-50),t.$$.dirty[0]&67108912&&l(14,o=j?r+n*2-4:r+n-2),t.$$.dirty[0]&13&&l(13,s=v.data.slice(u,d).map((m,B)=>({index:B+u,data:m}))),t.$$.dirty[0]&100663297&&le&&se(v.data,r,v.rowHeight)},[v,P,u,d,j,n,w,c,p,i,f,N,A,s,o,h,I,W,Qe,Ye,Ze,Et,Tt,zt,It,le,r,Lt,Dt,At,Bt,Mt]}class St extends ge{constructor(e){super(),_e(this,e,yt,Ct,ue,{indexTitle:1,options:0,setData:21,getSelectedRows:22,setWidth:23,setHeight:24},null,[-1,-1])}get setData(){return this.$$.ctx[21]}get getSelectedRows(){return this.$$.ctx[22]}get setWidth(){return this.$$.ctx[23]}get setHeight(){return this.$$.ctx[24]}}return{GridCommunity:St}});
